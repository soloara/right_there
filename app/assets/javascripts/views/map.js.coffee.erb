window.RightThere.Views.Map = Backbone.Marionette.Layout.extend
  template: JST['map']
  
  onRender: ->
    mapOptions = {
      center: new google.maps.LatLng(34.4230, 108.2115),
      zoom: 5,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    map = new google.maps.Map document.getElementById("map_canvas"), mapOptions
    _.each @collection.provinces(), (province)=>
      myLatlng = new google.maps.LatLng province.get('lat'), province.get('lng')
      image = "<%= asset_path 'assets/number_markers/number_#{province.get("tickets_count")}.png' %>"
      marker = new google.maps.Marker
        position: myLatlng,
        map: map,
        title:"Hello World!",
        icon: image